"use strict";(self.webpackChunk_420_w_50_sf=self.webpackChunk_420_w_50_sf||[]).push([[4026],{1893:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Notes de cours/useState","title":"Le hook useState","description":"Qu\'est-ce que useState ?","source":"@site/docs/Notes de cours/2-useState.md","sourceDirName":"Notes de cours","slug":"/Notes de cours/useState","permalink":"/420-W50-SF/docs/Notes de cours/useState","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Introduction aux composants de base en React Native","permalink":"/420-W50-SF/docs/Notes de cours/interfaceUtilisateur"},"next":{"title":"D\xe9velopper ses propres composants","permalink":"/420-W50-SF/docs/Notes de cours/components"}}');var r=s(4848),l=s(8453);const a={},i="Le hook useState",o={},c=[{value:"Qu&#39;est-ce que <code>useState</code> ?",id:"quest-ce-que-usestate-",level:2},{value:"Syntaxe de base",id:"syntaxe-de-base",level:2},{value:"Exemple 1 : Compteur simple",id:"exemple-1--compteur-simple",level:2},{value:"Remarques / Rappels",id:"remarques--rappels",level:3},{value:"Exemple 2 : Champ de texte",id:"exemple-2--champ-de-texte",level:2},{value:"Attention",id:"attention",level:2},{value:"Erreurs fr\xe9quentes \xe0 \xe9viter",id:"erreurs-fr\xe9quentes-\xe0-\xe9viter",level:2},{value:"Mauvaise mise \xe0 jour directe :",id:"mauvaise-mise-\xe0-jour-directe-",level:3},{value:"Bonne m\xe9thode :",id:"bonne-m\xe9thode-",level:3},{value:"Truc : mise \xe0 jour bas\xe9e sur l&#39;\xe9tat pr\xe9c\xe9dent",id:"truc--mise-\xe0-jour-bas\xe9e-sur-l\xe9tat-pr\xe9c\xe9dent",level:2}];function u(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsxs)(n.h1,{id:"le-hook-usestate",children:["Le hook ",(0,r.jsx)(n.code,{children:"useState"})]})}),"\n",(0,r.jsxs)(n.h2,{id:"quest-ce-que-usestate-",children:["Qu'est-ce que ",(0,r.jsx)(n.code,{children:"useState"})," ?"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"useState"})," est un ",(0,r.jsx)(n.strong,{children:"hook"})," de React qui permet \xe0 un composant fonctionnel de g\xe9rer un ",(0,r.jsx)(n.strong,{children:"\xe9tat local"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["C\u2019est comme une ",(0,r.jsx)(n.strong,{children:"m\xe9moire interne"})," du composant, qui peut changer au fil du temps (par exemple : un compteur, un champ de formulaire, un bool\xe9en pour afficher/masquer un \xe9l\xe9ment, etc.)."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"syntaxe-de-base",children:"Syntaxe de base"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const [valeur, setValeur] = useState(valeurInitiale);\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"valeur"})," : la variable d\u2019\xe9tat (lecture)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setValeur"})," : fonction pour ",(0,r.jsx)(n.strong,{children:"mettre \xe0 jour"})," la valeur"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"valeurInitiale"})," : valeur initiale \xe0 la premi\xe8re ex\xe9cution du composant"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Chaque fois que ",(0,r.jsx)(n.code,{children:"setValeur(...)"})," est appel\xe9, le composant est ",(0,r.jsx)(n.strong,{children:"re-rendu automatiquement"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"exemple-1--compteur-simple",children:"Exemple 1 : Compteur simple"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import React, { useState } from "react";\nimport { View, Text, Button } from "react-native";\n\nexport default function Compteur() {\n  const [compte, setCompte] = useState(0);\n\n  return (\n    <View>\n      <Text>Valeur : {compte}</Text>\n      <Button title="Incr\xe9menter" onPress={() => setCompte(compte + 1)} />\n    </View>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"remarques--rappels",children:"Remarques / Rappels"}),"\n",(0,r.jsx)(n.p,{children:"Un instant ! Nous avons fait la d\xe9claration en const, mais la valeur peut changer ??"}),"\n",(0,r.jsxs)(n.p,{children:["Oui, m\xeame si la ",(0,r.jsx)(n.strong,{children:"valeur"})," de compte change au fil du temps (\xe0 chaque appel \xe0 setCompte), ",(0,r.jsx)(n.strong,{children:"la r\xe9f\xe9rence \xe0 la variable"})," ne change pas. C\u2019est \xe7a qui permet d\u2019utiliser const ici, et c'est recommand\xe9 de le faire."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"const"})," signifie que ",(0,r.jsx)(n.strong,{children:"la variable ne peut pas \xeatre r\xe9assign\xe9e \xe0 un nouvel objet ou une nouvelle valeur"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Mais cela ",(0,r.jsx)(n.strong,{children:"ne veut pas dire que la valeur point\xe9e ne peut pas changer"})," (surtout s'il s'agit d'un objet, ou dans ce cas, d'un hook contr\xf4l\xe9 par React)."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Ce que fait r\xe9ellement React :"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Au moment o\xf9 l'on fait ",(0,r.jsx)(n.code,{children:"const [compte, setCompte] = useState(0)"}),", React garde compte \xe0 jour ",(0,r.jsx)(n.strong,{children:"entre chaque rendu du composant."})]}),"\n",(0,r.jsxs)(n.li,{children:["\xc0 chaque fois que ",(0,r.jsx)(n.code,{children:"setCompte(...)"})," est appel\xe9, React :"]}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Met \xe0 jour ",(0,r.jsx)(n.strong,{children:"l\u2019\xe9tat interne"})," du composant."]}),"\n",(0,r.jsx)(n.li,{children:"**Re-render le composant."}),"\n",(0,r.jsxs)(n.li,{children:["Redonne une ",(0,r.jsx)(n.strong,{children:"nouvelle valeur mise \xe0 jour"})," \xe0 compte dans le useState(...) du nouveau rendu."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Mais la d\xe9claration elle-m\xeame (",(0,r.jsx)(n.code,{children:"const [compte, setCompte] = ...)"})," ne change pas. Elle est r\xe9\xe9valu\xe9e \xe0 chaque rendu, mais ",(0,r.jsx)(n.strong,{children:"React se charge de fournir la nouvelle valeur"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["Un autre instant ! Nous sommes en Typescript, ne faut-il pas indiquer le ",(0,r.jsx)(n.strong,{children:"type"})," dans le ",(0,r.jsx)(n.code,{children:"useState"})," ?"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const [compte, setCompte] = useState<string>(0);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Pour les donn\xe9es de d\xe9part simple, on peut le laisser ainsi car Typescript va inf\xe9rer le type et cela va fonctionner. D\xe8s que l'on manipulera des types plus \xe9volu\xe9s, ",(0,r.jsx)(n.strong,{children:"il sera fortement recommand\xe9, voire essentiel de le sp\xe9cifier"})," :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"//Si l'on veut maintenir une liste des noms des cours de session 5\n//La liste est ici vide dans l'\xe9tat de d\xe9part :\nconst [coursSession5, setCoursSession5] = useState<string[]>([]);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"exemple-2--champ-de-texte",children:"Exemple 2 : Champ de texte"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import React, { useState } from "react";\nimport { View, TextInput, Text } from "react-native";\n\nexport default function SaisieTexte() {\n  const [nom, setNom] = useState("");\n\n  return (\n    <View>\n      <TextInput\n        placeholder="Entrez votre nom"\n        value={nom}\n        onChangeText={setNom}\n      />\n      <Text>Bonjour, {nom}!</Text>\n    </View>\n  );\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Ici, puisque setNom est une ",(0,r.jsx)(n.strong,{children:"fonction qui prend une string et l'injecte dans le state"}),", c'est tout \xe0 fait compatible avec :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"onChangeText={setNom}\n"})}),"\n",(0,r.jsx)(n.p,{children:'La version plus "verbeuse" serait celle-ci :'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"onChangeText={(text) => setNom(text)}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"attention",children:"Attention"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"useState"})," ",(0,r.jsx)(n.strong,{children:"ne remplace pas"})," la gestion d\u2019\xe9tat globale (sauvegarde entre 2 ex\xe9cutions)."]}),"\n",(0,r.jsxs)(n.li,{children:["On dira que l\u2019\xe9tat contr\xf4l\xe9 par le ",(0,r.jsx)(n.code,{children:"useState"})," est ",(0,r.jsx)(n.strong,{children:"local au composant"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"erreurs-fr\xe9quentes-\xe0-\xe9viter",children:"Erreurs fr\xe9quentes \xe0 \xe9viter"}),"\n",(0,r.jsx)(n.h3,{id:"mauvaise-mise-\xe0-jour-directe-",children:"Mauvaise mise \xe0 jour directe :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"compte = compte + 1; // Ceci ne fait rien de concret !\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bonne-m\xe9thode-",children:"Bonne m\xe9thode :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"setCompte(compte + 1);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"truc--mise-\xe0-jour-bas\xe9e-sur-l\xe9tat-pr\xe9c\xe9dent",children:"Truc : mise \xe0 jour bas\xe9e sur l'\xe9tat pr\xe9c\xe9dent"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"setCompte((prev) => prev + 1);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Utiliser cette forme \xe9vite peut \xe9viter des comportements ind\xe9dirables lorsqu\u2019on effectue plusieurs mises \xe0 jour d\u2019affil\xe9e."}),"\n",(0,r.jsx)(n.hr,{})]})}function d(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>i});var t=s(6540);const r={},l=t.createContext(r);function a(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);